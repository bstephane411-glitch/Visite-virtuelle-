<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Signature Visuelle | Studio de visites virtuelles</title>
  <meta name="description" content="Studio de visites virtuelles 360¬∞, drone et contenus premium pour l'immobilier et les professionnels." />
  <style>
    :root{
      --bg:#070a12;
      --panel:#101625;
      --panel-soft:#141d32;
      --line:rgba(255,255,255,.11);
      --text:#f7f8ff;
      --muted:#b8bfd6;
      --accent:#5b7cfa;
      --accent-2:#24c7a6;
      --radius:16px;
      --shadow:0 24px 70px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:radial-gradient(1000px 500px at 15% 0%,rgba(91,124,250,.26),transparent 45%),radial-gradient(900px 600px at 90% 10%,rgba(36,199,166,.14),transparent 50%),var(--bg);color:var(--text)}
    a{color:inherit;text-decoration:none}
    .container{max-width:1140px;margin:auto;padding:20px}
    header{position:sticky;top:0;z-index:40;background:rgba(7,10,18,.74);backdrop-filter:blur(10px);border-bottom:1px solid var(--line)}
    .header-in{display:flex;align-items:center;justify-content:space-between;gap:12px;max-width:1140px;margin:auto;padding:12px 20px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:36px;height:36px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));box-shadow:0 10px 26px rgba(91,124,250,.4)}
    .brand small{display:block;color:var(--muted)}
    nav{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:9px 12px;border-radius:999px;border:1px solid var(--line);font-size:14px;color:var(--muted)}
    .chip.cta{border-color:rgba(91,124,250,.5);color:var(--text);background:rgba(91,124,250,.2)}

    .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:16px;padding:28px 0 12px}
    .panel{border:1px solid var(--line);background:linear-gradient(180deg,var(--panel),var(--panel-soft));border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}
    h1{font-size:clamp(30px,4vw,48px);line-height:1.06;margin:8px 0 14px;letter-spacing:-.02em}
    .lead{color:var(--muted);font-size:16px;max-width:66ch}
    .stats{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:14px}
    .stat{padding:12px;border-radius:13px;border:1px solid var(--line);background:rgba(255,255,255,.02)}
    .stat b{display:block}
    .stat span{color:var(--muted);font-size:13px}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    .btn{cursor:pointer;border-radius:12px;border:1px solid var(--line);padding:10px 14px;font-weight:700;background:rgba(255,255,255,.03);color:var(--text)}
    .btn.main{background:linear-gradient(135deg,var(--accent),#6b61ff);border:none}

    section{padding:14px 0}
    .title-row{display:flex;align-items:end;justify-content:space-between;gap:10px;margin-bottom:10px}
    .title-row h2{margin:0}
    .title-row p{margin:0;color:var(--muted);font-size:14px}

    .projects{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    .card{border:1px solid var(--line);border-radius:15px;background:rgba(255,255,255,.02);overflow:hidden;display:flex;flex-direction:column}
    .card .cover{height:150px;background:linear-gradient(135deg,#2d3b67,#1d7f7f);display:flex;align-items:flex-end;padding:12px}
    .badge{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:rgba(0,0,0,.3);color:#d4dbf8}
    .cardBody{padding:12px}
    .meta{font-size:13px;color:var(--muted);display:flex;gap:8px;flex-wrap:wrap}
    .cardFoot{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:10px 12px;border-top:1px solid var(--line);margin-top:auto}
    .qr{width:70px;height:70px;border-radius:8px;border:1px solid var(--line);background:#fff;padding:4px}

    .proposals{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:10px}
    .proposal{padding:12px;border:1px solid var(--line);border-radius:12px;background:rgba(255,255,255,.02)}
    .proposal b{display:block;margin-bottom:6px;font-size:14px}
    .proposal span{color:var(--muted);font-size:13px}

    .modalBg{position:fixed;inset:0;background:rgba(2,5,12,.75);display:none;align-items:center;justify-content:center;padding:16px;z-index:60}
    .modal{width:min(980px,96vw);background:var(--panel);border:1px solid var(--line);border-radius:18px;overflow:hidden}
    .modalTop{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid var(--line)}
    .modalBody{padding:14px;display:grid;grid-template-columns:1.2fr .8fr;gap:12px}
    iframe{width:100%;height:100%;min-height:360px;border:0;border-radius:12px;background:#080b14}
    .stack{display:flex;flex-direction:column;gap:10px}
    .box{border:1px solid var(--line);border-radius:12px;background:rgba(255,255,255,.02);padding:12px}
    .box p{margin:6px 0 0;color:var(--muted);font-size:14px}

    footer{padding:26px 0;color:var(--muted);font-size:13px}

    @media (max-width:980px){
      .hero,.modalBody{grid-template-columns:1fr}
      .projects{grid-template-columns:1fr}
      .proposals{grid-template-columns:repeat(2,minmax(0,1fr))}
    }
  </style>
</head>
<body>
  <header>
    <div class="header-in">
      <div class="brand">
        <div class="logo"></div>
        <div><strong>Signature Visuelle</strong><small>Visites 360¬∞ ¬∑ Drone ¬∑ Marketing immobilier</small></div>
      </div>
      <nav>
        <a class="chip" href="#realisations">R√©alisations</a>
        <a class="chip" href="#propositions">5 am√©liorations</a>
        <a class="chip cta" href="#contact">Demander un devis</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <article class="panel">
        <small style="color:var(--muted)">Version professionnelle pr√™te √† pr√©senter aux clients</small>
        <h1>Un site vitrine premium<br/>avec QR code d√©di√© par projet.</h1>
        <p class="lead">Chaque r√©alisation dispose maintenant d'un QR code unique pour un acc√®s instantan√© depuis mobile. Id√©al en rendez-vous, en agence, sur flyer ou en vitrine √©cran TV.</p>
        <div class="stats">
          <div class="stat"><b>+ Conversion commerciale</b><span>Acc√®s direct aux visites via QR</span></div>
          <div class="stat"><b>+ Identification client</b><span>Un projet = un QR code</span></div>
          <div class="stat"><b>+ Cr√©dibilit√©</b><span>Pr√©sentation premium et claire</span></div>
          <div class="stat"><b>+ Productivit√©</b><span>Mise √† jour via projects.json</span></div>
        </div>
        <div class="actions">
          <a class="btn main" href="#realisations">Voir les projets</a>
          <button class="btn" id="focusFirst" type="button">Ouvrir le premier projet</button>
        </div>
      </article>
      <aside class="panel">
        <h2 style="margin:0 0 10px">Ce qui a √©t√© professionnalis√©</h2>
        <ul style="margin:0;padding-left:18px;color:var(--muted);line-height:1.55">
          <li>Design plus corporate avec hi√©rarchie visuelle claire.</li>
          <li>Cartes projets homog√®nes (type, localisation, points forts).</li>
          <li>QR code visible sur chaque carte + dans la fiche d√©taill√©e.</li>
          <li>Modal projet pour d√©monstration imm√©diate en rendez-vous.</li>
          <li>Section strat√©gique ¬´ 5 propositions d'am√©lioration ¬ª int√©gr√©e.</li>
        </ul>
      </aside>
    </section>

    <section id="realisations">
      <div class="title-row">
        <h2>R√©alisations clients</h2>
        <p id="countLabel">0 projet</p>
      </div>
      <div class="projects" id="projectsGrid"></div>
    </section>

    <section id="propositions">
      <div class="title-row">
        <h2>5 propositions concr√®tes pour aller plus loin</h2>
        <p>Plan d'am√©lioration recommand√©</p>
      </div>
      <div class="proposals">
        <article class="proposal"><b>1) Espace client priv√©</b><span>Acc√®s par mot de passe pour suivre avancement, livrables et QR exportables.</span></article>
        <article class="proposal"><b>2) Tableau KPI</b><span>Statistiques d'ouvertures QR, clics, dur√©e moyenne et performance par projet.</span></article>
        <article class="proposal"><b>3) Fiches PDF auto</b><span>G√©n√©ration automatique de plaquettes commerciales avec QR et branding.</span></article>
        <article class="proposal"><b>4) Filtrage intelligent</b><span>Recherche par ville, type de bien et budget pour acc√©l√©rer les d√©monstrations.</span></article>
        <article class="proposal"><b>5) SEO local + Ads</b><span>Landing pages d√©di√©es par secteur avec tracking d'acquisition et retargeting.</span></article>
      </div>
    </section>

    <section id="contact">
      <article class="panel">
        <div class="title-row" style="margin:0">
          <h2>Contact</h2>
          <p>√Ä personnaliser</p>
        </div>
        <p class="lead">üìû 06 00 00 00 00 ¬∑ ‚úâÔ∏è contact@signature-visuelle.fr ¬∑ üìç Vichy / Auvergne</p>
        <div class="actions">
          <a class="btn main" href="mailto:contact@signature-visuelle.fr?subject=Demande%20de%20devis%20-%20Visite%20virtuelle">Envoyer un email</a>
        </div>
      </article>
    </section>

    <footer>¬© <span id="year"></span> Signature Visuelle ‚Äî Site vitrine professionnel.</footer>
  </main>

  <div class="modalBg" id="modalBg" role="dialog" aria-modal="true" aria-label="Projet">
    <div class="modal">
      <div class="modalTop">
        <strong id="modalTitle">Projet</strong>
        <button class="btn" id="closeModal" type="button">Fermer</button>
      </div>
      <div class="modalBody">
        <iframe id="tourFrame" title="Visite virtuelle" loading="lazy"></iframe>
        <div class="stack">
          <div class="box"><strong id="modalMeta">-</strong><p>D√©tails du projet et lien direct pour le client.</p></div>
          <div class="box">
            <strong>QR Code du projet</strong>
            <p>Le client scanne et ouvre directement la visite.</p>
            <img id="modalQr" class="qr" alt="QR code du projet" />
          </div>
          <div class="box" style="display:flex;gap:8px;flex-wrap:wrap">
            <a id="openTour" class="btn main" target="_blank" rel="noreferrer">Ouvrir dans un nouvel onglet</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const FALLBACK_PROJECTS = [
      { title:"Appartement centre-ville (T3)", type:"Immobilier", location:"Vichy", highlights:"360¬∞ + photos HDR", tourUrl:"tour-appartement.html", youtubeId:"" },
      { title:"Maison familiale avec jardin", type:"Immobilier", location:"Cusset", highlights:"Visite immersive + teaser", tourUrl:"tour-maison.html", youtubeId:"" },
      { title:"Commerce premium", type:"Entreprise", location:"Bellerive-sur-Allier", highlights:"360¬∞ + pr√©sentation m√©tier", tourUrl:"tour-commerce.html", youtubeId:"" },
      { title:"Domaine avec vue drone", type:"Immobilier", location:"Bassin Vichyssois", highlights:"Pack 360¬∞ + drone", tourUrl:"tour-drone.html", youtubeId:"" }
    ];

    const grid = document.getElementById('projectsGrid');
    const countLabel = document.getElementById('countLabel');
    const modalBg = document.getElementById('modalBg');
    const modalTitle = document.getElementById('modalTitle');
    const modalMeta = document.getElementById('modalMeta');
    const tourFrame = document.getElementById('tourFrame');
    const openTour = document.getElementById('openTour');
    const modalQr = document.getElementById('modalQr');

    let projects = [];

    function qrUrl(url){
      return `https://api.qrserver.com/v1/create-qr-code/?size=220x220&margin=5&data=${encodeURIComponent(url)}`;
    }

    function absUrl(input){
      try { return new URL(input, window.location.href).toString(); }
      catch { return window.location.href; }
    }

    async function loadProjects(){
      try {
        const res = await fetch('projects.json', { cache:'no-store' });
        if(res.ok){
          const data = await res.json();
          if(Array.isArray(data) && data.length) return sanitizeProjects(data);
        }
      } catch(e) {}
      return sanitizeProjects(FALLBACK_PROJECTS);
    }

    function sanitizeProjects(data){
      return data.map((p) => ({
        title: String(p.title || 'Projet').slice(0,120),
        type: String(p.type || 'Immobilier').slice(0,40),
        location: String(p.location || '').slice(0,70),
        highlights: String(p.highlights || '').slice(0,140),
        tourUrl: String(p.tourUrl || '#').slice(0,500)
      }));
    }

    function renderProjects(){
      grid.innerHTML = '';
      projects.forEach((p, i) => {
        const fullUrl = absUrl(p.tourUrl);
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="cover"><span class="badge">${escapeHtml(p.type)}</span></div>
          <div class="cardBody">
            <h3 style="margin:0 0 8px">${escapeHtml(p.title)}</h3>
            <div class="meta"><span>üìç ${escapeHtml(p.location)}</span><span>‚ú® ${escapeHtml(p.highlights)}</span></div>
          </div>
          <div class="cardFoot">
            <button class="btn main" type="button">Voir le projet</button>
            <img class="qr" alt="QR code ${escapeHtml(p.title)}" src="${qrUrl(fullUrl)}" loading="lazy" />
          </div>`;
        card.querySelector('button').addEventListener('click', () => openProject(i));
        grid.appendChild(card);
      });
      countLabel.textContent = `${projects.length} projets disponibles`;
    }

    function openProject(index){
      const p = projects[index];
      const fullUrl = absUrl(p.tourUrl);
      modalTitle.textContent = p.title;
      modalMeta.textContent = `${p.type} ¬∑ ${p.location} ¬∑ ${p.highlights}`;
      tourFrame.src = fullUrl;
      openTour.href = fullUrl;
      modalQr.src = qrUrl(fullUrl);
      modalBg.style.display = 'flex';
    }

    function closeModal(){
      modalBg.style.display = 'none';
      tourFrame.src = 'about:blank';
      modalQr.src = '';
    }

    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, (c) => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
    }

    document.getElementById('year').textContent = new Date().getFullYear();
    document.getElementById('closeModal').addEventListener('click', closeModal);
    modalBg.addEventListener('click', (e) => { if(e.target === modalBg) closeModal(); });
    document.getElementById('focusFirst').addEventListener('click', () => { if(projects[0]) openProject(0); });

    (async function init(){
      projects = await loadProjects();
      renderProjects();
    })();
  </script>
</body>
</html>
